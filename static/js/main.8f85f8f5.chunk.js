(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{22:function(e,t,a){e.exports=a(45)},27:function(e,t,a){},45:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(19),i=a.n(s),c=(a(27),a(2)),l=a(3),o=a(5),u=a(4),m=a(6),p=function(){return r.a.createElement("nav",{id:"app-bar"},r.a.createElement("h1",null,"Entertainment Rating App"))},d=a(8),h=a(1),f=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(o.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={isLoading:!1},a.submitSearch=function(e){e.preventDefault();var t=document.getElementById("music-title"),n=document.getElementById("search-error"),r={genres:[],genreDescriptions:[]};a.setState({isLoading:!0}),fetch("https://api.napster.com/v2.2/search/verbose?apikey=MTFiZGY4NjgtMGM4Ni00YjIwLTk0OGYtYzI1ZWY4OGZjYTNk&per_type_limit=1&query=".concat(t.value,"&type=track")).then(function(e){return e.json()}).then(function(e){var t=e.search.data.tracks[0],s="";n.innerHTML="",t.links.genres.ids.forEach(function(e){s+="".concat(e,",")}),fetch("https://api.napster.com/v2.2/genres/".concat(s,"?apikey=MTFiZGY4NjgtMGM4Ni00YjIwLTk0OGYtYzI1ZWY4OGZjYTNk")).then(function(e){return e.json()}).then(function(e){e.genres.forEach(function(e){r={albumName:t.albumName,artistName:t.artistName,musicName:t.name,seconds:t.playbackSeconds,url:t.previewURL,genreIds:Object(d.a)(t.links.genres.ids),genres:Object(d.a)(r.genres).concat([e.name]),genreDescriptions:Object(d.a)(r.genreDescriptions).concat([e.description])},a.setState({isLoading:!1})}),a.props.searchMusic(r)})}).catch(function(e){n.innerHTML="The entered music title was not found.",a.setState({isLoading:!1})}),t.value=""},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"search-form container"},r.a.createElement("form",{onSubmit:this.submitSearch},r.a.createElement("input",{type:"text",placeholder:"Music title",id:"music-title",className:"search-input container"}),r.a.createElement("button",{className:"btn container",id:"search-btn"},"Search")),r.a.createElement("p",{id:"search-error"}),!0===this.state.isLoading?r.a.createElement("div",{className:"loading-spinner"}):null)}}]),t}(n.Component),g=Object(h.b)(null,function(e){return{searchMusic:function(t){return e(function(e){return{type:"SEARCH_MUSIC",music:e}}(t))}}})(f),b=function(e){function t(){return Object(c.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentWillReceiveProps",value:function(){var e=this;setTimeout(function(){var t=document.querySelector(".music-player"),a=document.createElement("audio");a.setAttribute("controls","");var n=document.createElement("source");n.src=e.props.state.searchResult.url,n.type="audio/mp3",a.appendChild(n),t.children[0].remove(),t.appendChild(a)},1)}},{key:"render",value:function(){return r.a.createElement("div",{className:"music-player container"},r.a.createElement("audio",{controls:!0}))}}]),t}(n.Component),E=Object(h.b)(function(e){return{state:e}})(b),v=Object(h.b)(function(e){return{state:e}})(function(e){var t=e.state.searchResult,a=t.musicName,n=t.artistName,s=t.albumName,i=t.genres,c=t.genreDescriptions,l=t.seconds,o=-1;return r.a.createElement("div",{className:"music-details container"},"undefined"===typeof a?null:r.a.createElement("div",null,r.a.createElement("h1",null,a," by",r.a.createElement("a",{href:"https://www.google.com/search?q=".concat(n),className:"blue",target:"blank"}," ",n)),r.a.createElement("h2",null,"Album: ",s),r.a.createElement("ul",null,"Genres:",i.map(function(e){return o++,r.a.createElement("li",{key:e,title:c[o]},e)})),r.a.createElement("strong",null,"Length: ",l," seconds")))}),N=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(o.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={isLoading:!1},a.searchThis=function(e){var t=document.getElementById("music-title"),a=document.getElementById("search-btn");t.value="".concat(e.target.innerHTML," ").concat(e.target.nextSibling.innerHTML),a.click()},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidUpdate",value:function(e){var t=this,a=this.props.state;if(e.state.searchResult!==a.searchResult){this.setState({isLoading:!0});var n="",r=[];a.searchResult.genreIds.forEach(function(e){n+="".concat(e,",")}),fetch("https://api.napster.com/v2.2/genres/".concat(n,"/tracks/top?apikey=MTFiZGY4NjgtMGM4Ni00YjIwLTk0OGYtYzI1ZWY4OGZjYTNk&limit=10")).then(function(e){return e.json()}).then(function(e){e.tracks.forEach(function(e){r.length<10&&(r=Object(d.a)(r).concat([{name:e.name,artistName:e.artistName,url:e.previewURL}]))}),t.props.similarContent(r),t.setState({isLoading:!1})})}}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"similar-content container"},r.a.createElement("h1",null,"Similar Content"),r.a.createElement("div",{className:"wrapper"},!0===this.state.isLoading?r.a.createElement("div",{className:"loading-spinner"}):"undefined"!==typeof this.props.state.similarContent?this.props.state.similarContent.map(function(t){return r.a.createElement("div",{key:t.url,className:"item"},r.a.createElement("h2",{onClick:e.searchThis,className:"blue"},t.name),r.a.createElement("h3",null,t.artistName))}):null))}}]),t}(n.Component),j=Object(h.b)(function(e){return{state:e}},function(e){return{similarContent:function(t){e(function(e){return{type:"SIMILAR_CONTENT",content:e}}(t))}}})(N),y=a(9),O=a.n(y),k=(a(18),function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(o.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={rating:"",stars:0},a.smile=function(e){switch(parseInt(e)){case 0:a.setState({rating:"far fa-angry",stars:1});break;case 1:a.setState({rating:"far fa-frown",stars:2});break;case 2:a.setState({rating:"far fa-meh",stars:3});break;case 3:a.setState({rating:"far fa-smile",stars:4});break;case 4:a.setState({rating:"far fa-smile-beam",stars:5});break;default:return null}},a.fillStar=function(e){if("far fa-star"===e.target.className){for(var t=e.target.id;t>=0;t--)e.target.parentNode.childNodes[t].setAttribute("class","fas fa-star");a.smile(e.target.id)}else{for(var n=parseInt(e.target.id)+1;n<=4;n++)e.target.parentNode.childNodes[n].setAttribute("class","far fa-star");a.smile(e.target.id)}},a.submitForm=function(e){e.preventDefault();var t=e.target.childNodes[1],n=e.target.childNodes[2],r=O.a.firestore();r.settings({timestampsInSnapshots:!0}),"undefined"!==typeof t.value&&""!==t.value&&0!==a.state.stars&&"undefined by undefined"!==a.props.music&&(r.collection("ratings").add({name:t.value,rating:n.value,stars:a.state.stars,music:a.props.music}),n.value="",document.querySelector(".stars").childNodes.forEach(function(e){return e.className="far fa-star"}),a.setState({rating:"",stars:0}))},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"rating-form container"},r.a.createElement("div",{className:"stars"},r.a.createElement("i",{className:"far fa-star",onClick:this.fillStar,id:"0"}),r.a.createElement("i",{className:"far fa-star",onClick:this.fillStar,id:"1"}),r.a.createElement("i",{className:"far fa-star",onClick:this.fillStar,id:"2"}),r.a.createElement("i",{className:"far fa-star",onClick:this.fillStar,id:"3"}),r.a.createElement("i",{className:"far fa-star",onClick:this.fillStar,id:"4"})),r.a.createElement("form",{onSubmit:this.submitForm},r.a.createElement("i",{className:this.state.rating}),r.a.createElement("input",{type:"text",placeholder:"Your name",className:"search-input container"}),r.a.createElement("textarea",{placeholder:"What did you think about this song? (Optional)",className:"container"}),r.a.createElement("button",{className:"btn container"},"Submit")))}}]),t}(n.Component)),S=Object(h.b)(function(e){return{music:"".concat(e.searchResult.musicName," by ").concat(e.searchResult.artistName)}})(k),w=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(o.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={ratings:[]},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidUpdate",value:function(e){var t=this;if(e.music!==this.props.music){var a=O.a.firestore();a.settings({timestampsInSnapshots:!0}),this.setState({ratings:[]}),a.collection("ratings").onSnapshot(function(e){t.setState({ratings:[]}),e.docs.forEach(function(e){e.data().music===t.props.music&&t.setState({ratings:Object(d.a)(t.state.ratings).concat([{id:e.id,name:e.data().name,music:e.data().music,stars:e.data().stars,rating:e.data().rating}])})})})}}},{key:"render",value:function(){return r.a.createElement("div",{className:"ratings container"},r.a.createElement("h1",null,"Ratings"),r.a.createElement("div",{className:"wrapper"},"undefined by undefined"!==this.props.music?this.state.ratings.length>0?this.state.ratings.map(function(e){return r.a.createElement("div",{className:"item",key:e.id},r.a.createElement("h2",null,e.name," - ",e.stars," stars"),r.a.createElement("p",null,e.rating))}):r.a.createElement("p",null,this.props.music," has no ratings yet. Be the first to rate it!"):null))}}]),t}(n.Component),I=Object(h.b)(function(e){return{music:"".concat(e.searchResult.musicName," by ").concat(e.searchResult.artistName)}})(w),C=function(e){function t(){return Object(c.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(p,null),r.a.createElement("div",{id:"main"},r.a.createElement("div",{className:"music-wrapper"},r.a.createElement("div",{className:"search"},r.a.createElement(g,null),r.a.createElement(E,null)),r.a.createElement(v,null),r.a.createElement(S,null)),r.a.createElement("div",{className:"side-content"},r.a.createElement(j,null),r.a.createElement(I,null))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var T=a(11),L=a(15),R={searchResult:{}},M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SEARCH_MUSIC":return Object(L.a)({},e,{searchResult:t.music});case"SIMILAR_CONTENT":return Object(L.a)({},e,{similarContent:t.content});default:return e}},Y=Object(T.b)(M,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());O.a.initializeApp({apiKey:"AIzaSyB6tmZ_w1d2vyK4hIGqBEUfMTlNbLjFjFA",authDomain:"entertainment-rating-app.firebaseapp.com",databaseURL:"https://entertainment-rating-app.firebaseio.com",projectId:"entertainment-rating-app",storageBucket:"entertainment-rating-app.appspot.com",messagingSenderId:"293386828518"}),i.a.render(r.a.createElement(h.a,{store:Y},r.a.createElement(C,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[22,2,1]]]);
//# sourceMappingURL=main.8f85f8f5.chunk.js.map